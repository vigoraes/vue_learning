<!doctype html>

<head>
	<title>War</title>
	<meta charset="utf-8">
	<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
	<div id="app">
		<div v-for="continente, index in continentes">
			<continente :index='index' :local='continente' :color='color[index]'> </continente>
		</div>
		<div>
			<button @click="updateColor('blue')">Start</button>
			<button @click="resetColor">Reset</button> 
		</div>
	</div>

	



	<script type="text/javascript">
		
		Vue.component('continente', {
			props: {
				local: {
					type: String,
					required: true,
					default: ''
				},
				
				color: {
					type: String,
					required: true,
				},
				
				index: {
					type: Number,
					required: true
				}
			},
			
			template: `
			<div :class="local" >
			<h1>{{soldiers}}</h1>
			<img :src="image" v-on:click='addSoldier'>
			</div>
			`,
			
			data(){
				return{
					soldiers: 1	
				}
			},

			methods: {
				addSoldier(){
					this.soldiers += 1
				}
			},
			
			computed: {
				image(){
					return 'images/' + this.local + '/' + this.color + '.png'
				}
			}			
		})


		var app = new Vue({
	 	 	el: '#app',
	  		
	  		data: {
	  			continentes: ['medio-paraiba', 'metropolitana', 'serrana', 'norte', 'noroeste', 'centro-sul', 'lagos'],
	  			color: ['default','default','default','default','default','default','default'],
	  			palette: ['blue', 'pink', 'purple', 'green', 'orange', 'red', 'yellow']
	    	},
	    	
	    	methods: {
	    		updateColor(color){
	    			var nums = [0,1,2,3,4,5,6],
					ranNums = [],
					i = nums.length,
					j = 0;

					while (i--) {
						j = Math.floor(Math.random() * (i+1));
						ranNums.push(nums[j]);
						nums.splice(j,1);
					}

					for(let i = 0; i < 7; i++){
						Vue.set(this.color, i, this.palette[ranNums[i]])	
					} 
	    		},
	    		resetColor(){
	    			for(let i = 0; i < 7; i++) Vue.set(this.color, i, 'default')
	    		}
	    	}
		})
	</script>
</body>